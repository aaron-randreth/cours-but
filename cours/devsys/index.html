<!doctype html><html lang=en><head><title>Développement Système: Introduction | Cours</title><link rel=canonical href=https://aaron-randreth.github.io/><link rel=stylesheet type=text/css href=/css/style.css><link rel=stylesheet type=text/css href=/css/nav.css><link rel=stylesheet type=text/css href=/css/footer.css><link rel=icon href=/favicon.svg type=image/svg+xml><meta name=description content="Objectifs &ldquo;Comprendre la structure d&rsquo;une application client-server, et les mécanismes bas niveaux, mis en oeuvre dans une application multitâches.&rdquo;
Processus: l&rsquo;ensemble des données stoqué par l&rsquo;OS pour effectuer une action.
Multitâches (multithreaded): utilisation de plusieurs coeurs pour effectuer une action.
Multiprocessus: utilisation de plusieurs processus pour effectuer une action.
Découverte du développement d&rsquo;applications multi-processus, traiter les problèmes de synchronisations, utiliser des outils de communications internes aux processus (interne à une même machine), mais aussi externe (entre plusieurs machines, via les sockets) via les APIs de transport."><meta name=keywords content="Ressource R03.05 - Programmation système"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="index, follow"><meta charset=utf-8></head><body><header class=nav-header><a href=/><img class=logo src=/favicon.svg style=max-height:1.5em alt="website
     logo"></a>
<input type=checkbox id=nav-toggle class=nav-toggle><nav class=nav-top><menu><li><a href=https://aaron-randreth.github.io/>Acceuil</a></li><li><a class=active href=/cours/ title=Cours>Cours</a></li></menu></nav><label for=nav-toggle class=nav-toggle-label><span></span></label></header><main class=main-content><header><h1>Développement système: Introduction</h1></header><details class=article-info><summary>Article information</summary><section><div style=clear:both class=taglist><a id="tag_ressource r03.05 - programmation système" href=https://aaron-randreth.github.io/tags/ressource-r03.05-programmation-syst%C3%A8me>Ressource R03.05 - Programmation Système</a></div><hr><h1>Table of content</h1><nav id=TableOfContents><ul><li><a href=#objectifs>Objectifs</a></li><li><a href=#système-de-fichiers>Système de fichiers</a><ul><li><a href=#gestion-des-fichiers-en-c>Gestion des fichiers en c</a></li></ul></li></ul></nav><p>Sep 2th 2022</p><hr><p>300 mots pour 2 minutes de lecture.</p></section></details><article><h1 id=objectifs>Objectifs</h1><p>&ldquo;Comprendre la structure d&rsquo;une application client-server, et les mécanismes bas niveaux, mis en oeuvre dans une application multitâches.&rdquo;</p><p><strong>Processus</strong>: l&rsquo;ensemble des données stoqué par l&rsquo;OS pour effectuer une action.</p><p><strong>Multitâches</strong> (multithreaded): utilisation de plusieurs coeurs pour effectuer une action.</p><p><strong>Multiprocessus</strong>: utilisation de plusieurs processus pour effectuer une action.</p><p>Découverte du développement d&rsquo;applications <strong>multi-processus</strong>, traiter les problèmes de <strong>synchronisations</strong>, utiliser des outils de communications internes aux processus (interne à une même machine), mais aussi externe (entre plusieurs machines, via les <strong>sockets</strong>) via les APIs de transport.</p><h1 id=système-de-fichiers>Système de fichiers</h1><h2 id=gestion-des-fichiers-en-c>Gestion des fichiers en c</h2><h3 id=gestion-des-erreurs>Gestion des erreurs</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C data-lang=C><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;errno.h&gt;</span><span style=color:#75715e>
</span></span></span></code></pre></div><p>Introduit une variable global errno qui contient le code erreur du dernier appel primitif système.</p><h3 id=affichage-des-erreurs>Affichage des erreurs</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C data-lang=C><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdio.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>perror</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> erreur);
</span></span></code></pre></div><h3 id=création-et-suppression-de-répertoire>Création et suppression de répertoire</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C data-lang=C><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;sys/stat.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* 
</span></span></span><span style=display:flex><span><span style=color:#75715e>  returns 0 en cas de succès, et -1 dans errno contient le code d&#39;erreur 
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>mkdir</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> path, <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> mode);
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>rmdir</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> path);
</span></span></code></pre></div><h3 id=contenu-dun-répertoire>Contenu d&rsquo;un répertoire</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C data-lang=C><span style=display:flex><span><span style=color:#75715e>//définit dans &lt;sys/dirent.h&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> dirent { <span style=color:#75715e>// Enregistrement qui permet de gérer un répertoire 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// Charactérisation du fichier 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>ino_t</span> d_ino; <span style=color:#75715e>// numéro d&#39;inode
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>char</span> d_type; <span style=color:#75715e>//type du ficher
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>char</span> d_name[<span style=color:#ae81ff>256</span>]<span style=color:#f92672>:</span> <span style=color:#75715e>// nom du fichier
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Infos de contrôle 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>off_t</span> d_off; <span style=color:#75715e>// décalage jusqu&#39;à la diren suivent
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>unsigned</span> <span style=color:#66d9ef>short</span> d_reclen; <span style=color:#75715e>// longueur de cet enregistement 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span></code></pre></div><h3 id=ouverture-et-fermeture-dun-répertoire>Ouverture et fermeture d&rsquo;un répertoire</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C data-lang=C><span style=display:flex><span>DIR<span style=color:#f92672>*</span> <span style=color:#a6e22e>opendir</span>(direname);
</span></span><span style=display:flex><span><span style=color:#a6e22e>closedir</span>(DIR<span style=color:#f92672>*</span> dirp);
</span></span></code></pre></div><h3 id=lecture-dune-entrée-dun-répertoire>Lecture d&rsquo;une entrée d&rsquo;un répertoire</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C data-lang=C><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;sys/dirent.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Ne retourne pas d&#39;erreur, NULL à la fin de lecture 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>struct</span> dirent <span style=color:#f92672>*</span><span style=color:#a6e22e>readdir</span>(DIR<span style=color:#f92672>*</span> dirp);
</span></span></code></pre></div><p>Ne pas <code>free</code> le pointeur dirent, le système s&rsquo;occupe de sa déallocation et un <code>free</code> manuel peut être problématique.</p><div id=nextprev><a href=/cours/com1/><div id=prevart>Previous:<br>Communication: Introduction</div></a><a href=/deveffi1/><div id=nextart>Next:<br>Développement efficace - Introduction à la complexité algorithmique</div></a></div></article></main><footer class=end-footer><a href=#top id=top-arrow><img src=/up-arrow.svg alt=⬆ style=max-height:2em title="Go to the top of the page"></a><p>Made with ❤️ in
<a href=https://gohugo.io><img src=/hugo_logo.svg style=max-height:1.5em alt="hugo static site generator framework"></a></p><p>🔥Roast my source-code over at
<a href=https://github.com/aaron-randreth/aaron-randreth.github.io><img src=/github_logo.svg style=max-height:1.5em alt="hugo static site generator framework"></a></p></footer></body></html>